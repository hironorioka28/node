<% include ../partials/header %>
<div class="question">
  <section class="question__wrapper question__wrapper--q" style="background-image:url(/img/qbg/q1bg.jpg)">
    <div class="container container--q">
      <h1 id="js-question" class="container__title">第<%= num %>問</h1>
      <p class="container__question">新郎・新婦、それぞれの名前を漢字で書いたとき、正しいものはどれか？</p>
    </div>
  </section>
  <section id="js-selection" class="question__wrapper">
    <div class="container">
      <p class="container__question container__question--forSelection">新郎・新婦、それぞれの名前を漢字で書いたとき、正しいものはどれか？</p>
      <div class="container__table">
        <table class="selectionTable">
          <tbody class="selectionTable__tbody">
            <tr class="selectionTable__row">
              <td class="selectionTable__data" style="background-image:url(http://stevejobko.com/wp-content/uploads/2014/12/%E5%B0%8F%E5%B6%8B.jpg)"></td>
              <td class="selectionTable__data" style="background-image:url(https://pbs.twimg.com/profile_images/439341459590750208/3bHeJS0h.jpeg)"></td>
            </tr>
            <tr class="selectionTable__row">
              <td class="selectionTable__data" style="background-image:url(http://images6.fanpop.com/image/photos/38300000/-kojima-haruna-38335508-1024-1267.jpg)"></td>
              <td class="selectionTable__data" style="background-image:url(http://images6.fanpop.com/image/photos/38300000/-kojima-haruna-38335313-1024-1265.jpg)"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
  <section id="js-answer" class="question__wrapper">
    <div class="container">
      <video id="js-playVideo" class="container__video" src="/img/v/q1Ans.m4v"></video>
    </div>
  </section>
</div><!-- /.question -->
<% include ../partials/scripts %>
<script>
  $(function() {
    var socket = io.connect();

    socket.on("showSelection_from_server", function(data) {
      var speed = 400,
          position = $("#" + data).offset().top;
      $("body").animate({scrollTop: position}, speed, "swing");
    });
    socket.on("playVideo_from_server", function(data) {
      var $video = $("#js-playVideo"),
          speed = 400,
          position = $("#js-answer").offset().top;

      $("body").animate({scrollTop: position}, speed, "swing");

      $video.get(0).play();
      $video.on("ended", function() {
        $("#js-answer").find(".container").append('<p class="js-showAnswer">正解は<span>' + data + '</span></p>');
        socket.emit("q1FinalAnswer", data);
      });
    });
  });
</script>
<% include ../partials/footer %>
